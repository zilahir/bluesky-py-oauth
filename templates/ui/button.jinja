{# Button macro for reusable button components #}
{% macro button(text, type="button", variant="primary", size="md", disabled=false, class="", attributes={}) %}
  {% set base_classes = "inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200" %}

  {% set variant_classes = {
    "primary": "bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",
    "secondary": "bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",
    "success": "bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",
    "danger": "bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",
    "warning": "bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",
    "outline": "border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-blue-500",
    "ghost": "bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-blue-500"
  } %}

  {% set size_classes = {
    "xs": "px-2.5 py-1.5 text-xs",
    "sm": "px-3 py-2 text-sm",
    "md": "px-4 py-2 text-sm",
    "lg": "px-4 py-2 text-base",
    "xl": "px-6 py-3 text-base"
  } %}

  {% set disabled_classes = "opacity-50 cursor-not-allowed" %}

  {% set final_classes = [
    base_classes,
    variant_classes[variant],
    size_classes[size],
    disabled_classes if disabled else "",
    class
  ] | join(" ") %}

  <button
    type="{{ type }}"
    class="{{ final_classes }}"
    {% if disabled %}disabled{% endif %}
    {% for key, value in attributes.items() %}
      {{ key }}="{{ value }}"
    {% endfor %}
  >
    {{ text }}
  </button>
{% endmacro %}

{# Icon button macro for buttons with icons #}
{% macro icon_button(icon, text="", type="button", variant="primary", size="md", disabled=false, class="", attributes={}) %}
  {% set base_classes = "inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200" %}

  {% set variant_classes = {
    "primary": "bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",
    "secondary": "bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",
    "success": "bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",
    "danger": "bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",
    "warning": "bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",
    "outline": "border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-blue-500",
    "ghost": "bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-blue-500"
  } %}

  {% set size_classes = {
    "xs": "px-2.5 py-1.5 text-xs",
    "sm": "px-3 py-2 text-sm",
    "md": "px-4 py-2 text-sm",
    "lg": "px-4 py-2 text-base",
    "xl": "px-6 py-3 text-base"
  } %}

  {% set icon_size_classes = {
    "xs": "w-3 h-3",
    "sm": "w-4 h-4",
    "md": "w-4 h-4",
    "lg": "w-5 h-5",
    "xl": "w-5 h-5"
  } %}

  {% set disabled_classes = "opacity-50 cursor-not-allowed" %}

  {% set final_classes = [
    base_classes,
    variant_classes[variant],
    size_classes[size],
    disabled_classes if disabled else "",
    class
  ] | join(" ") %}

  <button
    type="{{ type }}"
    class="{{ final_classes }}"
    {% if disabled %}disabled{% endif %}
    {% for key, value in attributes.items() %}
      {{ key }}="{{ value }}"
    {% endfor %}
  >
    <span class="{{ icon_size_classes[size] }} {{ 'mr-2' if text else '' }}">
      {{ icon | safe }}
    </span>
    {% if text %}{{ text }}{% endif %}
  </button>
{% endmacro %}

{# Loading button macro for buttons with loading states #}
{% macro loading_button(text, loading_text="Loading...", is_loading=false, type="button", variant="primary", size="md", disabled=false, class="", attributes={}) %}
  {% set base_classes = "inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200" %}

  {% set variant_classes = {
    "primary": "bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",
    "secondary": "bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",
    "success": "bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",
    "danger": "bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",
    "warning": "bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",
    "outline": "border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 focus:ring-blue-500",
    "ghost": "bg-transparent hover:bg-gray-100 text-gray-700 focus:ring-blue-500"
  } %}

  {% set size_classes = {
    "xs": "px-2.5 py-1.5 text-xs",
    "sm": "px-3 py-2 text-sm",
    "md": "px-4 py-2 text-sm",
    "lg": "px-4 py-2 text-base",
    "xl": "px-6 py-3 text-base"
  } %}

  {% set disabled_classes = "opacity-50 cursor-not-allowed" %}

  {% set final_classes = [
    base_classes,
    variant_classes[variant],
    size_classes[size],
    disabled_classes if (disabled or is_loading) else "",
    class
  ] | join(" ") %}

  <button
    type="{{ type }}"
    class="{{ final_classes }}"
    {% if disabled or is_loading %}disabled{% endif %}
    {% for key, value in attributes.items() %}
      {{ key }}="{{ value }}"
    {% endfor %}
  >
    {% if is_loading %}
      <svg class="animate-spin -ml-1 mr-3 h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      {{ loading_text }}
    {% else %}
      {{ text }}
    {% endif %}
  </button>
{% endmacro %}
